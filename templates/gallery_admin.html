{% extends 'base.html' %}
{% block title %}Manage mpos : Bongram Secondary School{% endblock %}
{% block content %}
<div class="admin-container">
  <div class="admin-form">
    <!-- form content -->
     <h2>Manage Gallery</h2>
  <form method="post" enctype="multipart/form-data">
    <div class="form-group">
      <label>Password:</label>
      <input type="password" name="password" required>
    </div>
    <div class="form-group">
      <label>Title:</label>
      <input type="text" name="title" >
    </div>
    <div class="form-group">
      <label>Description:</label>
      <textarea name="description" rows="4" ></textarea>
    </div>
    <div class="form-group">
      <label>Photos:</label>
      <input type="file" name="photos" multiple accept="image/*" >
    </div>
    <div class="form-group">
      <label>Position:</label>
      <input type="number" name="sl" placeholder="Enter position where you want to add/delete"> 
    </div>
    <div class="form-actions">
      {% if gallery_items %}

        <button type="submit" name="action" value="delete" class="btn btn-danger">Delete </button>
      {% endif %}
      <button type="submit" name="action" value="post" class="btn btn-primary">Post</button>
      {%if gallery_items|length > 1 %}
        <button type="submit" name="action" value="swap" class="btn btn-danger">Swap</button>
      {% endif %}
    </div>
    <br>
    <div class="form-group">
      {%if gallery_items|length > 1 %}
        <span>
          <input type="number" name="idx1" placeholder="swap position 1"> 
        <input type="number" name="idx2" placeholder="swap position 2"> 
        </span>
      {% endif %}
    </div>
  </form>
  </div>
  <div class="admin-news glass-card">
    <h1 class="text-center">Gallery</h1>
<div class="gallery-grid">
  {% for idx, item in enumerate(gallery_items) %}
    <a href="{{ url_for('gallery_detail', idx=idx) }}" class="gallery-link">
      <div class="gallery-card">
        <img
          src="{{ url_for('static', filename='images/gallery/' + item.images[0]) }}"
          alt="{{ item.title }}"
          class="gallery-img">
        <h3 style="text-align: center;">{{ item.title }}</h3>
        <!-- print item number -->
         <p style="text-align: center;"> position : {{ idx + 1 }}</p>
      </div>
    </a>
  {% endfor %}
</div>
</div>
{% endblock %}